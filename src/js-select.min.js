!function(e){window.select={settings:{maxOptionsInLabel:3,containerWidthModifier:1},counter:1,ln:{oneOptionSelected:"selected",multipleOptionsSelected:"selected",defaultPlaceholder:"Click to choose"},init:function(t){return this.each(function(){var s=e(this);if(s.data("js-select.settings",e.extend({},select.settings,t)),"SELECT"!=s.prop("tagName"))return e.error("js-select only applies to <SELECT> elements not <"+s.prop("tagName")+">");if(!s.data("js-select.initialized")){s.addClass("js-select-original"),s.data("default-selected",s.val()),s.data("js-select.no",select.counter),s.data("js-select.initialized",!0),select._build(s),select._bindEvents();var l=window.MutationObserver||window.WebKitMutationObserver;l&&new l(function(t){e(t[0].target).select("update")}).observe(s[0],{childList:!0}),select.counter++}})},update:function(){return this.each(function(){var t=e(this);select._buildOptions(t),select._updateLabel(t)})},open:function(){return this.each(function(){var t=e(this),s=t.data("js-select.settings"),l=t.data("js-select.trigger"),a=t.data("js-select.container");if(e(".js-select-original").select("close"),!a.is(":visible")){a.show(),l.addClass("active"),a.find("a").first().focus();var n=e(document).width(),i=l.outerWidth(!0),c=l.offset(),r=i;1!=s.containerWidthModifier&&c.left+i*s.containerWidthModifier<n&&(r=i*s.containerWidthModifier),a.css("width",r),l.data("js-select.source.element").trigger("open")}})},close:function(){return this.each(function(){var t=e(this),s=t.data("js-select.trigger"),l=t.data("js-select.container");l.is(":visible")&&(l.hide(),s.removeClass("active"),t.trigger("close"))})},toggle:function(){return this.each(function(){var t=e(this),s=t.data("js-select.container");s.is(":visible")?t.select("close"):t.select("open")})},_build:function(e){select._buildTrigger(e),select._buildContainer(e),select._buildOptions(e),select._updateLabel(e)},_buildTrigger:function(t){var s;s=t.data("js-select.trigger")?t.data("js-select.trigger"):e("<a>").attr("href","javascript:void(0)").attr("id","js-select-trigger-"+select.counter).addClass("js-select-trigger").css({width:t.outerWidth(!0)}).data("js-select.no",select.counter).data("js-select.source.element",t).insertAfter(t);{var l=e("<span>").addClass("js-select-trigger-label").appendTo(s),a=e("<span>").addClass("js-select-trigger-arrow").appendTo(s);e("<span>").addClass("js-select-trigger-arrow-inner").appendTo(a)}t.data("placeholder")?l.html(t.data("placeholder")).addClass("placeholder"):l.html(select.ln.defaultPlaceholder).addClass("placeholder"),t.data("js-select.trigger",s)},_buildContainer:function(t){var s,l=t.data("js-select.trigger");t.data("js-select.container")?(s=t.data("js-select.container"),s.children()):(s=e("<div>").attr("id","js-select-container-"+select.counter).addClass("js-select-container").data("js-select.no",select.counter).data("js-select.source.element",t).insertAfter(l),e("<div>").addClass("js-select-container-inner").appendTo(s)),t.data("js-select.container",s)},_buildOptions:function(t){var s=t.data("js-select.container").find(".js-select-container-inner");s.html(""),t.find("optgroup, option").each(function(l,a){var n=e(a);if("OPTGROUP"==n.prop("tagName")){var i=e("<a>").attr("href","javascript:void(0)").addClass("js-select-container-inner-group").html(n.attr("label")).appendTo(s);t.attr("multiple")||i.on("click",function(){})}else{var c=e("<a>").attr("href","javascript:void(0)").addClass("js-select-container-inner-item").html(n.text()).data("js-select.value",n.val()).data("js-select.multiple",t.attr("multiple")).appendTo(s);n.prop("selected")&&c.addClass("selected"),n.prop("disabled")&&c.addClass("disabled"),n.attr("title")&&""!=n.attr("title")&&c.append('<span class="js-select-container-inner-item-description">'+n.attr("title")+"</span>")}})},_updateLabel:function(t){var s=t.data("js-select.settings"),l=t.data("js-select.trigger"),a=l.find(".js-select-trigger-label"),n=e("#js-select-container-"+l.data("js-select.no"));"undefined"==typeof a.data("js-select.original.label")&&a.data("js-select.original.label",a.html());var i=n.find(".selected");if(i.length>s.maxOptionsInLabel)a.removeClass("placeholder").html(i.length+" "+(1==i.length?select.ln.oneOptionSelected:select.ln.multipleOptionsSelected));else if(i.length>0&&i.length<=s.maxOptionsInLabel){var c="";i.each(function(t,s){""!=c&&(c+=", "),c+=e(s).clone().children().remove().end().text()}),a.removeClass("placeholder").html(c)}else a.addClass("placeholder").html(a.data("js-select.original.label"))},_toggleItem:function(t){if(!t.hasClass("disabled")){var s=t.parents(".js-select-container"),l=s.data("js-select.source.element");if(l.attr("multiple")||s.find(".selected").removeClass("selected"),t.hasClass("selected")?t.removeClass("selected"):t.addClass("selected"),l.attr("multiple")){var a=s.find(".selected"),n=[];a.each(function(t,s){n.push(e(s).data("js-select.value"))});var i=!1;l.find("option").each(function(t,s){-1!==e.inArray(s.value,n)?(s.selected=!0,i||(l[0].selectedIndex=t,i=!0)):s.selected=!1})}else{var c=s.find(".selected");l.find("option").each(function(e,t){c.data("js-select.value")==t.value?(t.selected=!0,l[0].selectedIndex=e):t.selected=!1})}l.trigger("change"),select._updateLabel(l),l.attr("multiple")||l.select("close")}},_bindEvents:function(){select._unbindEvents(),e(document).on("click.js-select",".js-select-trigger",function(){return e(this).data("js-select.source.element").select("toggle"),!0}).on("keypress.js-select",".js-select-trigger",function(t){return 0==t.keyCode?(e(this).data("js-select.source.element").select("toggle"),!0):void 0}).on("keypress.js-select",".js-select-container-inner-group",function(t){return 38==t.keyCode?(t.preventDefault(),t.stopPropagation(),e(this).prev().focus(),!0):40==t.keyCode?(t.preventDefault(),t.stopPropagation(),e(this).next().focus(),!0):void 0}).on("keypress.js-select",".js-select-container-inner-item",function(t){return 38==t.keyCode?(t.preventDefault(),t.stopPropagation(),e(this).prev().focus(),!0):40==t.keyCode?(t.preventDefault(),t.stopPropagation(),e(this).next().focus(),!0):0==t.keyCode?(t.preventDefault(),t.stopPropagation(),select._toggleItem(e(this))):void 0}).on("click.js-select",".js-select-container-inner-item",function(){return select._toggleItem(e(this))})},_unbindEvents:function(){e(document).off("click.js-select").off("keypress.js-select")}},e.fn.select=function(t){return select[t]&&0===t.indexOf("_")?e.error("Method "+t+" in js-select is private"):select[t]?select[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on js-select"):select.init.apply(this,arguments)},e(document).on("click touchstart",function(t){e(t.target).closest(".js-select-trigger").length||e(t.target).closest(".js-select-container").length||e(".js-select-container").each(function(t,s){var l=e(s);l.is(":visible")&&l.data("js-select.source.element").select("close")})}).on("keypress",function(t){27==t.keyCode&&e(".js-select-container").each(function(t,s){var l=e(s);l.is(":visible")&&l.data("js-select.source.element").select("close")})})}(jQuery);